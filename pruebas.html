<!DOCTYPE html>
<html>
<head>
    <style>
        table {
            border-collapse: collapse;
            float: left;
            margin-right: 20px;
        }

        table, th, td {
            border: 1px solid black;
            padding: 5px;
        }

        .draggable {
            margin: 5px;
            padding: 5px;
            background-color: lightblue;
            cursor: pointer;
        }
    </style>
</head>
<body>
    <h2>Arrastra los botones a las tablas:</h2>

    <table id="table1" ondrop="drop(event)" ondragover="allowDrop(event)">
        <tr>
            <th>Botón</th>
            <th>Número Secreto</th>
        </tr>
        <tr>
            <td ondrop="drop(event)" ondragover="allowDrop(event)"></td>
            <td>
                <div class="secret"></div>
            </td>
        </tr>
        <tr>
            <td ondrop="drop(event)" ondragover="allowDrop(event)"></td>
            <td>
                <div class="secret"></div>
            </td>
        </tr>
        <tr>
            <td ondrop="drop(event)" ondragover="allowDrop(event)"></td>
            <td>
                <div class="secret"></div>
            </td>
        </tr>
    </table>

    <table id="table2" ondrop="drop(event)" ondragover="allowDrop(event)">
        <tr>
            <th>Botón</th>
            <th>Número Secreto</th>
        </tr>
        <tr>
            <td ondrop="drop(event)" ondragover="allowDrop(event)"></td>
            <td>
                <div class="secret"></div>
            </td>
        </tr>
        <tr>
            <td ondrop="drop(event)" ondragover="allowDrop(event)"></td>
            <td>
                <div class="secret"></div>
            </td>
        </tr>
    </table>

    <table id="table3" ondrop="drop(event)" ondragover="allowDrop(event)">
        <tr>
            <th>Botón</th>
            <th>Número Secreto</th>
        </tr>
        <tr>
            <td ondrop="drop(event)" ondragover="allowDrop(event)"></td>
            <td>
                <div class="secret"></div>
            </td>
        </tr>
        <tr>
            <td ondrop="drop(event)" ondragover="allowDrop(event)"></td>
            <td>
                <div class="secret"></div>
            </td>
        </tr>
        <tr>
            <td ondrop="drop(event)" ondragover="allowDrop(event)"></td>
            <td>
                <div class="secret"></div>
            </td>
        </tr>
    </table>

    <div id="left-column">
        <h3>Botones:</h3>
        <div class="draggable" id="btn1" draggable="true" ondragstart="drag(event)" data-secret="123">Botón 1</div>
        <div class="draggable" id="btn2" draggable="true" ondragstart="drag(event)" data-secret="456">Botón 2</div>
        <div class="draggable" id="btn3" draggable="true" ondragstart="drag(event)" data-secret="789">Botón 3</div>
    </div>

    <script>
        function allowDrop(event) {
            event.preventDefault();
        }

        function drag(event) {
            event.dataTransfer.setData("text", event.target.id);
        }

        function drop(event) {
    event.preventDefault();
    var data = event.dataTransfer.getData("text");
    var button = document.getElementById(data);
    var td = event.target.closest('td');
    var table = event.target.closest('table');

    if (td && table) {
        var existingButton = td.querySelector('.draggable');
        if (existingButton && existingButton !== button) {
            // Hay un botón existente en la columna, mover el botón arrastrado a esa posición
            existingButton.style.display = "block";
            existingButton.style.opacity = "1";
            td.removeChild(existingButton);
        }
        td.appendChild(button);
        // Obtener el número secreto correspondiente al botón arrastrado
        var secretDiv = td.nextElementSibling.querySelector('.secret');
        var secretNumber = button ? button.getAttribute('data-secret') : '';
        // Verificar si el número secreto ya se encuentra en alguna otra tabla
        var tables = document.querySelectorAll('table');
        for (var i = 0; i < tables.length; i++) {
            if (tables[i] !== table) {
                var secretDivs = tables[i].querySelectorAll('.secret');
                for (var j = 0; j < secretDivs.length; j++) {
                    if (secretDivs[j].innerHTML === secretNumber) {
                        secretDivs[j].innerHTML = '';
                    }
                }
            }
        }

        // Mostrar el número secreto en la fila correspondiente
        secretDiv.innerHTML = secretNumber;
    } else if (button && !td) {
        // Si el botón se suelta fuera de una tabla, eliminar el número secreto de todas las tablas
        var secretDivs = document.querySelectorAll('.secret');
        for (var i = 0; i < secretDivs.length; i++) {
            secretDivs[i].innerHTML = '';
        }
    }
}



    </script>
</body>
</html>

